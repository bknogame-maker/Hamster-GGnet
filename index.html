<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Hamster Clicker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #000;
      color: #fff;
    }
    h1 {
      font-size: 32px;
      margin: 20px;
    }
    #hamster {
      width: 150px;
      cursor: pointer;
      margin: 20px;
    }
    #coins {
      font-size: 24px;
      margin: 15px;
    }
    .btn {
      margin: 8px;
      padding: 10px 18px;
      border: none;
      border-radius: 12px;
      background: #444;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: 0.2s;
    }
    .btn:hover {
      background: #666;
    }
  </style>
</head>
<body>
  <h1>🐹 Hamster Clicker 🐹</h1>
  
  <!-- عکس همستر -->
  <img id="hamster" src="hamster.png" onclick="clickHamster()">

  <div id="coins">سکه‌ها: 0</div>

  <button class="btn" onclick="buyUpgrade()">🛒 ارتقاء کلیک (10)</button>
  <button class="btn" onclick="buyAuto()">⚡ درآمد خودکار (50)</button>
  <button class="btn" onclick="unlockMusic()">🎵 باز کردن موزیک (100)</button>
  <button class="btn" onclick="nextMusic()">🎶 موزیک بعدی</button>
  <button class="btn" onclick="saveGame()">💾 ذخیره</button>
  <button class="btn" onclick="resetGame()">🔄 شروع دوباره</button>

  <!-- موزیک پس‌زمینه -->
  <audio id="bg-music" loop></audio>

  <script>
    let coins = 0;
    let clickPower = 1;
    let autoPower = 0;
    let musicUnlocked = false;
    let currentTrack = 0;

    // لیست موزیک‌ها
    const tracks = ["music1.mp3", "music2.mp3", "music3.mp3"];

    const hamster = document.getElementById("hamster");
    const coinsText = document.getElementById("coins");
    const music = document.getElementById("bg-music");

    function updateCoins() {
      coinsText.innerText = "سکه‌ها: " + coins;
    }

    function clickHamster() {
      coins += clickPower;
      updateCoins();
    }

    function buyUpgrade() {
      if (coins >= 10) {
        coins -= 10;
        clickPower++;
        updateCoins();
      }
    }

    function buyAuto() {
      if (coins >= 50) {
        coins -= 50;
        autoPower++;
        updateCoins();
      }
    }

    setInterval(() => {
      coins += autoPower;
      updateCoins();
    }, 1000);

    function unlockMusic() {
      if (coins >= 100 && !musicUnlocked) {
        coins -= 100;
        musicUnlocked = true;
        playMusic();
        alert("موزیک باز شد 🎶");
        updateCoins();
      } else if (musicUnlocked) {
        if (music.paused) {
          music.play();
        } else {
          music.pause();
        }
      } else {
        alert("سکه کافی نداری ❌");
      }
    }

    function nextMusic() {
      if (musicUnlocked) {
        currentTrack = (currentTrack + 1) % tracks.length;
        playMusic();
      } else {
        alert("اول باید موزیک رو با 100 سکه باز کنی ❌");
      }
    }

    function playMusic() {
      music.src = tracks[currentTrack];
      music.play();
    }

    function saveGame() {
      localStorage.setItem("hamsterCoins", coins);
      localStorage.setItem("hamsterClick", clickPower);
      localStorage.setItem("hamsterAuto", autoPower);
      localStorage.setItem("hamsterMusic", musicUnlocked);
      localStorage.setItem("hamsterTrack", currentTrack);
      alert("بازی ذخیره شد ✅");
    }

    function resetGame() {
      coins = 0;
      clickPower = 1;
      autoPower = 0;
      musicUnlocked = false;
      currentTrack = 0;
      music.pause();
      updateCoins();
    }

    window.onload = () => {
      if (localStorage.getItem("hamsterCoins")) {
        coins = parseInt(localStorage.getItem("hamsterCoins"));
        clickPower = parseInt(localStorage.getItem("hamsterClick"));
        autoPower = parseInt(localStorage.getItem("hamsterAuto"));
        musicUnlocked = (localStorage.getItem("hamsterMusic") === "true");
        currentTrack = parseInt(localStorage.getItem("hamsterTrack")) || 0;
        updateCoins();
        if (musicUnlocked) playMusic();
      }
    }
  </script>
</body>
</html>
